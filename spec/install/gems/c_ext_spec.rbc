!RBIX
0
x
M
1
n
n
x
10
__script__
i
22
5
7
0
64
47
49
1
1
15
5
7
2
64
56
3
47
50
4
1
15
2
11
I
3
I
0
I
0
I
0
n
p
5
s
11
spec_helper
x
7
require
s
34
installing a gem with C extensions
M
1
p
2
x
9
for_block
t
n
x
9
__block__
i
11
5
7
0
64
56
1
47
50
2
1
11
I
4
I
0
I
0
I
0
I
-2
p
3
s
8
installs
M
1
p
2
x
9
for_block
t
n
x
9
__block__
i
81
5
56
0
47
50
1
0
15
5
7
2
5
48
3
47
49
4
0
7
5
63
3
47
49
6
1
15
5
7
7
64
47
49
8
1
15
5
7
9
64
47
49
8
1
15
5
48
10
5
7
11
64
47
49
12
1
49
13
1
15
5
7
14
64
47
49
15
1
15
5
48
10
49
16
0
7
17
64
83
18
11
I
5
I
0
I
0
I
0
I
-2
p
19
M
1
p
2
x
9
for_block
t
n
x
9
__block__
i
11
5
7
0
64
56
1
47
50
2
1
11
I
4
I
0
I
0
I
0
I
-2
p
3
s
11
c_extension
M
1
p
2
x
9
for_block
t
n
x
9
__block__
i
55
57
19
0
15
20
0
7
0
64
35
1
13
18
2
49
1
1
15
15
20
0
7
0
64
7
2
64
49
3
2
15
20
0
7
4
64
7
5
64
49
3
2
15
20
0
7
6
64
7
7
64
49
3
2
11
I
5
I
1
I
1
I
1
n
p
8
s
14
ext/extconf.rb
x
11
extensions=
s
189
          require "mkmf"
          name = "c_extension_bundle"
          dir_config(name)
          raise "OMG" unless with_config("c_extension") == "hello"
          create_makefile(name)

x
5
write
s
17
ext/c_extension.c
s
321
          #include "ruby.h"

          VALUE c_extension_true(VALUE self) {
            return Qtrue;
          }

          void Init_c_extension_bundle() {
            VALUE c_Extension = rb_define_class("CExtension", rb_cObject);
            rb_define_method(c_Extension, "its_true", c_extension_true, 0);
          }

s
18
lib/c_extension.rb
s
39
          require "c_extension_bundle"

p
11
I
0
I
6
I
4
I
7
I
13
I
8
I
1f
I
10
I
2b
I
1d
I
37
x
71
/home/hone/Projects/heroku_work/bundler/spec/install/gems/c_ext_spec.rb
p
1
x
1
s
x
9
build_gem
p
5
I
0
I
5
I
0
I
6
I
b
x
71
/home/hone/Projects/heroku_work/bundler/spec/install/gems/c_ext_spec.rb
p
0
x
11
build_repo2
s
21
      source "file://
x
9
gem_repo2
x
4
to_s
s
26
"
      gem "c_extension"

x
7
gemfile
s
49
config build.c_extension --with-c_extension=hello
x
6
bundle
s
7
install
x
3
out
s
17
extconf.rb failed
x
7
include
x
10
should_not
s
45
Bundler.require; puts CExtension.new.its_true
x
3
run
x
6
should
s
4
true
x
2
==
p
21
I
0
I
4
I
0
I
5
I
8
I
23
I
9
I
24
I
16
I
23
I
1b
I
28
I
24
I
29
I
2d
I
2b
I
3c
I
2d
I
45
I
2e
I
51
x
71
/home/hone/Projects/heroku_work/bundler/spec/install/gems/c_ext_spec.rb
p
0
x
2
it
p
5
I
0
I
3
I
0
I
4
I
b
x
71
/home/hone/Projects/heroku_work/bundler/spec/install/gems/c_ext_spec.rb
p
0
x
8
describe
p
5
I
0
I
1
I
9
I
3
I
16
x
71
/home/hone/Projects/heroku_work/bundler/spec/install/gems/c_ext_spec.rb
p
0
